(this["webpackJsonpreservation-system"]=this["webpackJsonpreservation-system"]||[]).push([[0],{359:function(e,t,a){e.exports=a(474)},474:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),c=a.n(l),i=a(64),o=a.n(i),u=a(18),s=a(48),d=a(55),m=a(109),p=a(190),f=a(476),b=a(480),g=a(479),E=a(504),h=a(503),v=a(239),j=a(242),O=a(299),y=a(229),C=a(49);function k(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(new Date),i=Object(u.a)(c,2),o=i[0],k=i[1],S=Object(n.useState)(""),w=Object(u.a)(S,2),_=w[0],x=w[1],T=Object(n.useState)({pu_time:"",pu_addr:""}),D=Object(u.a)(T,2),P=D[0],A=D[1],N=Object(C.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(4),textAlign:"left",color:e.palette.text.primary},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}))(),F=function(){l(!0)},z=function(){l(!1)};return r.a.createElement("div",null,r.a.createElement(m.a,{variant:"outlined",color:"primary",onClick:F},"New Trip"),r.a.createElement(f.a,{open:a,onClose:z,"aria-labelledby":"form-dialog-title"},r.a.createElement(h.a,{id:"form-dialog-title"},"Enter A New Trip"),r.a.createElement(g.a,null,r.a.createElement(E.a,null,"Use this form to create a new trip!"),r.a.createElement(y.a,{name:"pu_date",value:o,onChange:k,required:!0}),r.a.createElement(p.a,{id:"userPickupTime",label:"Pickup Time",name:"pu_time",type:"time",onChange:function(e){e.persist(),A((function(t){return Object(d.a)({},t,Object(s.a)({},e.target.name,e.target.value))}))},defaultValue:"05:30",className:N.textField,inputProps:{step:300},required:!0}),r.a.createElement(v.a,{id:"demo-simple-select-outlined-label"},"Trip Type"),r.a.createElement(j.a,{name:"trip_type",labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",onChange:function(e){x(e.target.value)},value:_,required:!0},r.a.createElement(O.a,{value:"Airport"},"Airport"),r.a.createElement(O.a,{value:"Local"},"Local"),r.a.createElement(O.a,{value:"NYC"},"NYC"))),r.a.createElement(b.a,null,r.a.createElement(m.a,{onClick:z,color:"primary"},"Cancel"),r.a.createElement(m.a,{onClick:function(e){e.preventDefault();var t={trip_type:_,pu_date:o,pu_time:P.pu_time,pu_addr:P.pu_addr};fetch("/trips/add-trip",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return console.log(e)})),F()},color:"primary"},"Create Trip"))))}var S=a(2),w=a(9),_=a(306),x=a(307),T=a(303),D=a(506),P=a(301),A=a(335),N=a(302),F=a(334),z=a(237),I=a(50),W=a(149),R=a(332),L=a(151),V=a(304),q=a(308),U=a(507),B=a(341),H=a.n(B),J=a(342),G=a.n(J),M=a(516),Y=a(486),Z=a(488),K=a(505),Q=a(300),X=a(338),$=a.n(X),ee=a(339),te=a.n(ee),ae=a(125),ne=Object(C.a)({avatar:{backgroundColor:ae.a[100],color:ae.a[600]}});function re(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),l=a[0],c=a[1],i=ne(),s=e.onClose,d=e.selectedValue,m=e.open;Object(n.useEffect)((function(){o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(fetch("/drivers/all-drivers").then((function(e){return e.json()})).then((function(e){return c(e)})));case 2:case"end":return e.stop()}}))}),[]);var p=function(t,a){s(t),function(e,t){fetch("/trips/assign-driver/".concat(e,"/").concat(t),{method:"PUT"})}(e.tripId,a)};return r.a.createElement(f.a,{onClose:function(){s(d)},"aria-labelledby":"simple-dialog-title",open:m},r.a.createElement(h.a,{id:"simple-dialog-title"},"Assign A Driver"),r.a.createElement(Y.a,null,l.map((function(e){return r.a.createElement(Z.a,{button:!0,onClick:function(){return p(e.first_name,e._id)},key:e._id},r.a.createElement(K.a,null,r.a.createElement(M.a,{className:i.avatar,src:e.image},r.a.createElement($.a,null))),r.a.createElement(Q.a,{primary:e.email}))})),r.a.createElement(Z.a,{autoFocus:!0,button:!0,onClick:function(){return p("addDriverFunction")}},r.a.createElement(K.a,null,r.a.createElement(M.a,null,r.a.createElement(te.a,null))),r.a.createElement(Q.a,{primary:"Add New Driver"}))))}function le(e){var t=e.tripId,a=r.a.useState(!1),l=Object(u.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(),s=Object(u.a)(o,2),d=s[0],p=s[1],f=Object(n.useState)(),b=Object(u.a)(f,2),g=b[0],E=b[1];return r.a.createElement("div",null,r.a.createElement(I.a,{variant:"subtitle1"},"Assigned Driver: ",g),r.a.createElement(m.a,{variant:"outlined",color:"primary",onClick:function(){i(!0)}},"Assign A Driver"),r.a.createElement(re,{selectedValue:function(){return p(d)},open:c,onClose:function(e){i(!1),E(e)},tripId:t}))}function ce(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var ie=[{id:"date",numeric:!1,disablePadding:!0,label:"Trip Date"},{id:"time",numeric:!1,disablePadding:!1,label:"Pickup Time"},{id:"pu_address",numeric:!1,disablePadding:!1,label:"Pickup Address"},{id:"trip_type",numeric:!1,disablePadding:!1,label:"Trip Type"},{id:"assigned_driver",numeric:!1,disablePadding:!1,label:"Driver"},{id:"trip_actions",numeric:!1,disablePadding:!1,label:"Edit Trip"}];function oe(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,l=e.orderBy,c=e.numSelected,i=e.rowCount,o=e.onRequestSort;return r.a.createElement(P.a,null,r.a.createElement(N.a,null,r.a.createElement(T.a,{padding:"checkbox"},r.a.createElement(R.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:a,inputProps:{"aria-label":"select all trips"}})),ie.map((function(e){return r.a.createElement(T.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:l===e.id&&n},r.a.createElement(F.a,{active:l===e.id,direction:l===e.id?n:"asc",onClick:(a=e.id,function(e){o(e,a)})},e.label,l===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var a}))))}var ue=Object(C.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"dark"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(w.i)(e.palette.secondary.dark,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),se=function(e){var t=ue(),a=e.numSelected;return r.a.createElement(z.a,{className:Object(S.a)(t.root,Object(s.a)({},t.highlight,a>0))},a>0?r.a.createElement(I.a,{className:t.title,color:"inherit",variant:"subtitle1"},a," selected"):r.a.createElement(I.a,{className:t.title,variant:"h6",id:"tableTitle"},"Trips"),a>0?r.a.createElement(V.a,{title:"Delete"},r.a.createElement(L.a,{"aria-label":"delete"},r.a.createElement(H.a,null))):r.a.createElement(V.a,{title:"Filter list"},r.a.createElement(L.a,{"aria-label":"filter list"},r.a.createElement(G.a,null))))},de=Object(C.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function me(){var e=de(),t=Object(n.useState)("asc"),a=Object(u.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)("time"),s=Object(u.a)(i,2),d=s[0],m=s[1],p=Object(n.useState)([]),f=Object(u.a)(p,2),b=f[0],g=f[1],E=Object(n.useState)(0),h=Object(u.a)(E,2),v=h[0],j=h[1],O=Object(n.useState)(!1),y=Object(u.a)(O,2),C=y[0],k=y[1],S=Object(n.useState)(5),w=Object(u.a)(S,2),P=w[0],F=w[1],z=Object(n.useState)([]),I=Object(u.a)(z,2),L=I[0],V=I[1];Object(n.useEffect)((function(){o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(fetch("/trips/get-trips").then((function(e){return e.json()})).then((function(e){V(e)})));case 2:case"end":return e.stop()}}))}),[]);var B=P-Math.min(P,L.length-v*P);return r.a.createElement("div",{className:e.root},r.a.createElement(W.a,{className:e.paper},r.a.createElement(se,{numSelected:b.length}),r.a.createElement(D.a,null,r.a.createElement(_.a,{className:e.table,"aria-labelledby":"tableTitle",size:C?"small":"medium","aria-label":"enhanced table"},r.a.createElement(oe,{classes:e,numSelected:b.length,order:l,orderBy:d,onSelectAllClick:function(e){if(e.target.checked){var t=L.map((function(e){return e.name}));g(t)}else g([])},onRequestSort:function(e,t){c(d===t&&"asc"===l?"desc":"asc"),m(t)},rowCount:L.length}),r.a.createElement(x.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(L,function(e,t){return"desc"===e?function(e,a){return ce(e,a,t)}:function(e,a){return-ce(e,a,t)}}(l,d)).slice(v*P,v*P+P).map((function(e,t){var a,n=(a=e,-1!==b.indexOf(a)),l="enhanced-table-checkbox-".concat(t);return r.a.createElement(N.a,{hover:!0,onClick:function(t){return function(e,t){var a=b.indexOf(t),n=[];-1===a?n=n.concat(b,t):0===a?n=n.concat(b.slice(1)):a===b.length-1?n=n.concat(b.slice(0,-1)):a>0&&(n=n.concat(b.slice(0,a),b.slice(a+1))),g(n)}(0,e.puDate)},role:"checkbox","aria-checked":n,tabIndex:-1,key:e.puDate,selected:n},r.a.createElement(T.a,{padding:"checkbox"},r.a.createElement(R.a,{checked:n,inputProps:{"aria-labelledby":l}})),r.a.createElement(T.a,{component:"th",id:l,scope:"row",padding:"none"},e.puDate),r.a.createElement(T.a,{align:"left"},e.puTime),r.a.createElement(T.a,{align:"left"},e.puAddr.text_address),r.a.createElement(T.a,{align:"left"},e.tripType),r.a.createElement(T.a,{align:"left"},e.assignedDriver),r.a.createElement(T.a,{component:"th"},r.a.createElement(le,{tripId:e._id})))})),B>0&&r.a.createElement(N.a,{style:{height:(C?33:53)*B}},r.a.createElement(T.a,{colSpan:6}))))),r.a.createElement(A.a,{rowsPerPageOptions:[5,10,25],component:"div",count:L.length,rowsPerPage:P,page:v,onChangePage:function(e,t){j(t)},onChangeRowsPerPage:function(e){F(parseInt(e.target.value,10)),j(0)}})),r.a.createElement(q.a,{control:r.a.createElement(U.a,{checked:C,onChange:function(e){k(e.target.checked)}}),label:"Dense padding"}))}var pe=a(343),fe=a.n(pe),be=function(){return r.a.createElement(fe.a,{columns:[{title:"Date",field:"date"},{title:"Time",field:"time"},{title:"Address",field:"address"},{title:"Assigned Driver",field:"assigned_driver"},{title:"Type",field:"trip_type"}],title:"Trip Table",data:function(e){return new Promise((function(t,a){var n="/trips/get-trips?";n+="per_page="+e.pageSize,n+="&page="+(e.page+1),fetch(n).then((function(e){return e.json()})).then((function(e){try{t({data:e.data})}catch(a){console.log(a)}}))}))}})};function ge(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),i=Object(u.a)(c,2),s=i[0],d=i[1],v=Object(n.useState)(null),y=Object(u.a)(v,2),C=y[0],k=y[1],S=function(){d(!0)},w=function(){d(!1)};return Object(n.useEffect)((function(){o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(fetch("/vehicles/vehicle-list").then((function(e){return e.json()})).then((function(e){l(e)})));case 2:case"end":return e.stop()}}))}),[]),r.a.createElement("div",null,r.a.createElement(m.a,{variant:"outlined",color:"primary",onClick:S},"New Vehicle"),r.a.createElement(f.a,{open:s,onClose:w,"aria-labelledby":"form-dialog-title"},r.a.createElement(h.a,{id:"form-dialog-title"},"Add A New Vehicle"),r.a.createElement(g.a,null,r.a.createElement(E.a,null,"Add A New Vehicle"),r.a.createElement(j.a,{name:"vehicle-make",labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",onChange:function(e){k(e.target.value)},value:C,required:!0},a.map((function(e,t){return r.a.createElement(O.a,{key:t,value:t},e.makes[t])}))),r.a.createElement(p.a,null)),r.a.createElement(b.a,null,r.a.createElement(m.a,{onClick:function(e){e.preventDefault();fetch("/vehicles/add-vehicle",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({make:"Ford"})}).then((function(e){return e.json()})).then((function(e){return console.log(e)})),S()},color:"primary"},"Add Vehicle"),r.a.createElement(m.a,{onClick:w,color:"secondary"},"Cancel"))))}var Ee=a(349),he=a.n(Ee),ve=(a(517),function(e){var t=e.text;return r.a.createElement("div",null,t)}),je=function(e){e.lat,e.lng,e.trips;var t=Object(n.useState)(null),a=Object(u.a)(t,2);a[0],a[1];return r.a.createElement("div",{style:{height:"33vh",width:"100%"}},r.a.createElement(he.a,{bootstrapURLKeys:{key:"AIzaSyC0VaGsv4vdS6aBw7otqrikEI4ykWbQRbE",language:"en"},defaultCenter:{lat:39.949,lng:-79.2949},center:{lat:39.949,lng:-79.2949},defaultZoom:10},r.a.createElement(ve,{text:"Holla!",lat:36.2949,lng:-77.39029})))},Oe=a(191),ye=a(512),Ce=a(513);function ke(e){var t=e.message,a=e.openState,l=Object(n.useState)({open:!1,vertical:"top",horizontal:"center",message:""}),c=Object(u.a)(l,2),i=c[0],o=c[1],s=i.vertical,m=i.horizontal;i.open;return r.a.createElement("div",null,r.a.createElement(ye.a,{anchorOrigin:{vertical:s,horizontal:m},key:"".concat(s,",").concat(m),open:a,autoHideDuration:6e3},r.a.createElement(Ce.a,{onClick:function(){o(Object(d.a)({},i,{open:!1}))}}," ",t," ")))}function Se(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),i=Object(u.a)(c,2),o=i[0],E=i[1],v=Object(n.useState)(!1),j=Object(u.a)(v,2),O=j[0],y=j[1],C=Object(n.useState)({first_name:"",last_name:"",email:"",phone:"",street:"",city:"",state:"",zipcode:""}),k=Object(u.a)(C,2),S=k[0],w=k[1],_=Object(n.useState)({image:"",loaded:0}),x=Object(u.a)(_,2),T=x[0],D=x[1],P=function(){l(!1)};return r.a.createElement("div",null,O?r.a.createElement(ke,{openState:O,message:o}):null,r.a.createElement(m.a,{variant:"outlined",color:"primary",onClick:function(){l(!0)}},"Add Driver"),r.a.createElement(f.a,{open:a,onClose:P,"aria-labelledby":"form-dialog-title"},r.a.createElement("form",null,r.a.createElement(h.a,{id:"form-dialog-title"},"Add Driver"),r.a.createElement(g.a,null,r.a.createElement(p.a,{autoFocus:!0,margin:"dense",id:"first_name",name:"first_name",label:"First Name",type:"text",onChange:function(e){return w(Object(d.a)({},S,Object(s.a)({},e.target.name,e.target.value)))},fullWidth:!0}),r.a.createElement(p.a,{autoFocus:!0,margin:"dense",id:"last_name",name:"last_name",label:"Last Name",type:"text",onChange:function(e){return w(Object(d.a)({},S,Object(s.a)({},e.target.name,e.target.value)))},fullWidth:!0}),r.a.createElement(p.a,{autoFocus:!0,margin:"dense",id:"email",name:"email",label:"E-Mail",type:"email",onChange:function(e){return w(Object(d.a)({},S,Object(s.a)({},e.target.name,e.target.value)))},fullWidth:!0}),r.a.createElement(p.a,{autoFocus:!0,margin:"dense",id:"phone",name:"phone",label:"Phone Number",type:"tel",onChange:function(e){return w(Object(d.a)({},S,Object(s.a)({},e.target.name,e.target.value)))},fullWidth:!0}),r.a.createElement(p.a,{autoFocus:!0,margin:"dense",id:"street",name:"street",label:"Street",type:"text",onChange:function(e){return w(Object(d.a)({},S,Object(s.a)({},e.target.name,e.target.value)))},fullWidth:!0}),r.a.createElement(p.a,{autoFocus:!0,margin:"dense",id:"city",name:"city",label:"City",type:"text",onChange:function(e){return w(Object(d.a)({},S,Object(s.a)({},e.target.name,e.target.value)))},fullWidth:!0}),r.a.createElement(p.a,{autoFocus:!0,margin:"dense",id:"state",name:"state",label:"State",type:"text",onChange:function(e){return w(Object(d.a)({},S,Object(s.a)({},e.target.name,e.target.value)))},fullWidth:!0}),r.a.createElement(p.a,{autoFocus:!0,margin:"dense",id:"zipcode",name:"zipcode",label:"Zip Code",type:"number",onChange:function(e){return w(Object(d.a)({},S,Object(s.a)({},e.target.name,e.target.value)))},fullWidth:!0}),r.a.createElement(Oe.a,{name:"image",type:"file",onChange:function(e){console.log(URL.createObjectURL(e.target.files[0])),D({image:URL.createObjectURL(e.target.files[0]).replace(/blob:/,"")})}}),r.a.createElement(M.a,{src:T.image?T.image.name:"https://i.pravatar.cc/150?img=2"})),r.a.createElement(b.a,null,r.a.createElement(m.a,{onClick:P,type:"reset",color:"primary"},"Cancel"),r.a.createElement(m.a,{onClick:function(e){e.preventDefault();var t=new FormData;t.append("first_name",S.first_name),t.append("last_name",S.last_name),t.append("email",S.email),t.append("phone",S.phone),t.append("street",S.street),t.append("city",S.city),t.append("state",S.state),t.append("zipcode",S.zipcode),t.append("image",T.image),fetch("/drivers/add-driver",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:t}).then((function(e){e.ok?E("Driver was successfully added!"):E("Driver was not set due to an error.")})).then((function(e){return y(!0),e})),P()},color:"primary"},"Add")))))}var we=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(fetch("/trips/get-trips").then((function(e){return e.json()})).then((function(e){l(e)})));case 2:case"end":return e.stop()}}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(je,{lat:-74.5892,lng:38.54993,trips:a}),r.a.createElement(me,null),r.a.createElement(m.a,{onClick:function(){return console.log(a[0].puAddr.location)}},"Click to console trips"),r.a.createElement(k,null),r.a.createElement(ge,null),r.a.createElement(Se,null),r.a.createElement(be,{tripData:a}))},_e=a(23),xe=a(350);var Te=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(_e.a,{utils:xe.a},r.a.createElement(we,null)))};c.a.render(r.a.createElement(Te,null),document.getElementById("root"))}},[[359,1,2]]]);
//# sourceMappingURL=main.5a8c8d25.chunk.js.map